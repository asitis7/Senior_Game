<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹˜ë§¤ ì˜ˆë°© 365</title>
    
    <!-- PWA ë©”íƒ€ íƒœê·¸ -->
    <meta name="theme-color" content="#20B2AA">
    <meta name="description" content="ì¹˜ë§¤ ì˜ˆë°©ì„ ìœ„í•œ 365ì¼ ë‘ë‡Œ í›ˆë ¨">
    
    <!-- iOS ì „ìš© ë©”íƒ€ íƒœê·¸ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ì¹˜ë§¤ ì˜ˆë°© 365">
    
    <!-- ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ ë§í¬ -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PGX1LHBFHM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-PGX1LHBFHM');
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            overflow-x: hidden;
            padding: 20px;
            padding-bottom: 40px;
        }
        
        .header {
            text-align: center;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        /* PWA ì„¤ì¹˜ ì¹´ë“œ */
        .install-card {
            width: 100%;
            max-width: 500px;
            background: linear-gradient(135deg, rgba(32, 178, 170, 0.2), rgba(64, 224, 208, 0.2));
            border: 2px solid rgba(32, 178, 170, 0.4);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(32, 178, 170, 0.2);
            display: none;
            position: relative;
            overflow: hidden;
        }
        
        .install-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .install-card.show {
            display: block;
            animation: slideInUp 0.5s ease-out;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .install-icon {
            font-size: 60px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .install-title {
            font-size: 24px;
            font-weight: bold;
            color: #40E0D0;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .install-description {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .install-benefits {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: left;
        }
        
        .install-benefits h4 {
            color: #FFD700;
            font-size: 16px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .benefit-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .benefit-item:last-child {
            margin-bottom: 0;
        }
        
        .benefit-icon {
            margin-right: 10px;
            font-size: 16px;
        }
        
        .install-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }
        
        .install-btn {
            background: linear-gradient(45deg, #20B2AA, #40E0D0);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 280px;
        }
        
        .install-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.6);
        }
        
        .install-btn:active {
            transform: translateY(-1px);
        }
        
        .install-btn.secondary {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-size: 16px;
            padding: 12px 25px;
            max-width: 200px;
        }
        
        .install-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .progress-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            border-radius: 5px;
            transition: width 0.8s ease;
            width: 0%;
        }
        
        .progress-text {
            margin-top: 10px;
            font-size: 14px;
            opacity: 0.8;
            text-align: center;
        }
        
        .main-container {
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        
        .game-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .current-game-title {
            font-size: 24px;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .game-description {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.5;
            margin-bottom: 25px;
        }
        
        .game-launch-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
            margin: 15px 0;
            width: 100%;
            max-width: 300px;
            position: relative;
            overflow: hidden;
        }
        
        .game-launch-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
        }
        
        .game-launch-btn:active {
            transform: translateY(-1px);
        }
        
        .game-launch-btn.completed {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .game-status {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 4px solid #FFD700;
        }
        
        .status-title {
            color: #FFD700;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .status-text {
            line-height: 1.5;
            font-size: 14px;
        }
        
        .completion-section {
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .completion-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .completion-text {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .restart-btn {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
        }
        
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.6);
        }
        
        .auto-progress-indicator {
            background: rgba(33, 150, 243, 0.2);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
            text-align: left;
        }
        
        .auto-progress-indicator .indicator-title {
            color: #2196F3;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .countdown {
            font-size: 18px;
            font-weight: bold;
            color: #FFD700;
            margin: 10px 0;
        }
        
        .hidden {
            display: none;
        }
        
        /* PWA ì„¤ì¹˜ ëª¨ë‹¬ */
        .install-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .install-modal.show {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .install-modal-content {
            background: white;
            border-radius: 25px;
            padding: 40px 30px;
            text-align: center;
            max-width: 450px;
            width: 100%;
            color: #333;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideInScale 0.4s ease-out;
        }
        
        @keyframes slideInScale {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .install-modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }
        
        .install-modal-close:hover {
            color: #333;
        }
        
        .install-modal-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #20B2AA, #40E0D0);
            border-radius: 25px;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            color: white;
            box-shadow: 0 10px 30px rgba(32, 178, 170, 0.3);
        }
        
        .install-modal-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .install-modal-description {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .manual-instructions {
            text-align: left;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }
        
        .manual-instructions h4 {
            color: #495057;
            margin-bottom: 20px;
            text-align: center;
            font-size: 18px;
        }
        
        .manual-instructions ol {
            padding-left: 25px;
        }
        
        .manual-instructions li {
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .game-url {
            background: #e9ecef;
            padding: 12px 15px;
            border-radius: 8px;
            font-family: monospace;
            color: #495057;
            font-size: 13px;
            margin: 8px 0;
            word-break: break-all;
            border-left: 4px solid #20B2AA;
        }
        
        .footer {
            width: 100%;
            max-width: 500px;
            margin-top: 30px;
            padding: 30px 20px 20px;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            font-size: 12px;
            opacity: 0.8;
            line-height: 1.6;
            flex-shrink: 0;
        }
        
        .footer-section {
            margin-bottom: 15px;
        }
        
        .footer-section:last-child {
            margin-bottom: 0;
        }
        
        .footer-title {
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 8px;
        }
        
        @media (max-width: 480px) {
            body {
                padding: 15px;
                padding-bottom: 30px;
            }
            
            .title {
                font-size: 28px;
            }
            
            .install-card {
                padding: 25px 20px;
                margin-bottom: 15px;
            }
            
            .install-icon {
                font-size: 50px;
                margin-bottom: 15px;
            }
            
            .install-title {
                font-size: 20px;
            }
            
            .install-description {
                font-size: 14px;
            }
            
            .game-container {
                padding: 30px 20px;
                margin-bottom: 20px;
            }
            
            .completion-section {
                padding: 30px 20px;
                margin-bottom: 20px;
            }
            
            .footer {
                font-size: 11px;
                padding: 20px 15px 15px;
                margin-top: 20px;
                max-width: 95%;
            }
            
            .footer-section {
                margin-bottom: 12px;
            }
            
            .footer-title {
                font-size: 12px;
                margin-bottom: 6px;
            }
            
            .install-modal-content {
                padding: 30px 20px;
                margin: 10px;
            }
            
            .install-modal-title {
                font-size: 24px;
            }
            
            .install-modal-icon {
                width: 80px;
                height: 80px;
                font-size: 40px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">ğŸ§  ì¹˜ë§¤ ì˜ˆë°© 365</h1>
        <p class="subtitle">ìˆœì°¨ì  ë‘ë‡Œ í›ˆë ¨ìœ¼ë¡œ ê±´ê°•í•œ í•˜ë£¨ë¥¼ ì‹œì‘í•˜ì„¸ìš”!</p>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">ê²Œì„ 1/4 ëŒ€ê¸°ì¤‘</div>
        </div>
    </div>
    
    <!-- PWA ì„¤ì¹˜ ì¹´ë“œ -->
    <div class="install-card" id="installCard">
        <div class="install-icon">ğŸ“±</div>
        <div class="install-title">ì•±ìœ¼ë¡œ í¸ë¦¬í•˜ê²Œ!</div>
        <div class="install-description">
            í™ˆ í™”ë©´ì— ì¹˜ë§¤ ì˜ˆë°© 365ë¥¼ ì„¤ì¹˜í•˜ì—¬<br>
            ë” ë¹ ë¥´ê³  í¸ë¦¬í•˜ê²Œ ì´ìš©í•˜ì„¸ìš”!
        </div>
        
        <div class="install-benefits">
            <h4>ğŸŒŸ ì„¤ì¹˜ í›„ í˜œíƒ</h4>
            <div class="benefit-item">
                <span class="benefit-icon">âš¡</span>
                <span>ë” ë¹ ë¥¸ ì ‘ì† ì†ë„</span>
            </div>
            <div class="benefit-item">
                <span class="benefit-icon">ğŸ“±</span>
                <span>ì•±ì²˜ëŸ¼ í¸ë¦¬í•œ ì‚¬ìš©</span>
            </div>
            <div class="benefit-item">
                <span class="benefit-icon">ğŸ”’</span>
                <span>ì˜¤í”„ë¼ì¸ì—ì„œë„ ì ‘ê·¼ ê°€ëŠ¥</span>
            </div>
            <div class="benefit-item">
                <span class="benefit-icon">ğŸ¯</span>
                <span>ì›í„°ì¹˜ë¡œ ë°”ë¡œ ì‹¤í–‰</span>
            </div>
        </div>
        
        <div class="install-buttons">
            <button class="install-btn" id="installAppBtn" onclick="showInstallModal()">
                ğŸ“² ì§€ê¸ˆ ì„¤ì¹˜í•˜ê¸°
            </button>
            <button class="install-btn secondary" onclick="dismissInstallCard()">
                ë‚˜ì¤‘ì— í•˜ê¸°
            </button>
        </div>
    </div>
    
    <div class="main-container">
        <div class="game-container" id="gameContainer">
            <div class="current-game-title" id="currentGameTitle">ê²Œì„ 1 - ê¸°ì´ˆ ë‘ë‡Œ í›ˆë ¨</div>
            <div class="game-description" id="gameDescription">
                ì²« ë²ˆì§¸ ë‘ë‡Œ í›ˆë ¨ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.<br>
                ê²Œì„ ì™„ë£Œ í›„ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ì„¸ìš”.
            </div>
            
            <button class="game-launch-btn" id="launchBtn" onclick="launchCurrentGame()">
                ğŸ® ê²Œì„ ì‹œì‘í•˜ê¸°
            </button>
            
            <div class="game-status">
                <div class="status-title">ğŸ“‹ ê²Œì„ ì •ë³´</div>
                <div class="status-text" id="statusText">
                    ê²Œì„ì„ ì‹œì‘í•˜ë©´ ìƒˆ ì°½ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.<br>
                    ê²Œì„ ì™„ë£Œ í›„ ì´ ì°½ìœ¼ë¡œ ëŒì•„ì™€ì„œ "ê²Œì„ ì™„ë£Œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                </div>
            </div>
            
            <div class="auto-progress-indicator hidden" id="autoProgressIndicator">
                <div class="indicator-title">ğŸ”„ ë‹¤ìŒ ê²Œì„ ì¤€ë¹„ ì¤‘...</div>
                <div>ì ì‹œ í›„ ë‹¤ìŒ ê²Œì„ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤</div>
                <div class="countdown" id="countdown">3ì´ˆ í›„ ì§„í–‰</div>
            </div>
        </div>
        
        <div class="completion-section hidden" id="completionSection">
            <div class="completion-title">ğŸ‰ ëª¨ë“  ê²Œì„ ì™„ë£Œ!</div>
            <div class="completion-text">
                4ë‹¨ê³„ì˜ ë‘ë‡Œ í›ˆë ¨ì„ ëª¨ë‘ ë§ˆì¹˜ì…¨ìŠµë‹ˆë‹¤!<br>
                ë§¤ì¼ ê¾¸ì¤€íˆ í•˜ì‹œë©´ ë‘ë‡Œ ê±´ê°• ìœ ì§€ì— í° ë„ì›€ì´ ë©ë‹ˆë‹¤.<br>
                ì˜¤ëŠ˜ë„ ìˆ˜ê³ í•˜ì…¨ì–´ìš”! ğŸŒŸ
            </div>
            <button class="restart-btn" onclick="restartAllGames()">
                ğŸ”„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘
            </button>
        </div>
    </div>
    
    <!-- PWA ì„¤ì¹˜ ëª¨ë‹¬ -->
    <div class="install-modal" id="installModal">
        <div class="install-modal-content">
            <button class="install-modal-close" onclick="closeInstallModal()">Ã—</button>
            <div class="install-modal-icon">ğŸ“±</div>
            <div class="install-modal-title">ì¹˜ë§¤ ì˜ˆë°© 365</div>
            <div class="install-modal-description">
                í™ˆ í™”ë©´ì— ì•±ì„ ì¶”ê°€í•˜ì—¬ ë” í¸ë¦¬í•˜ê²Œ ì´ìš©í•˜ì„¸ìš”!
            </div>
            
            <div id="deviceInstructions">
                <!-- ê¸°ê¸°ë³„ ì„¤ì¹˜ ë°©ë²•ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì‚½ì…ë©ë‹ˆë‹¤ -->
            </div>
            
            <button class="install-btn" id="autoInstallBtn" onclick="attemptAutoInstall()" style="display: none;">
                ğŸ“± ìë™ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸°
            </button>
            
            <button class="install-btn secondary" onclick="closeInstallModal()">
                ë‚˜ì¤‘ì— í•˜ê¸°
            </button>
        </div>
    </div>
    
    <div class="footer">
        <div class="footer-section">
            <div class="footer-title">ğŸ“„ ì €ì‘ê¶Œ ì•ˆë‚´</div>
            <div>
                ë³¸ ì›¹ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ì½˜í…ì¸ ëŠ” ì €ì‘ê¶Œë²•ì— ì˜í•´ ë³´í˜¸ë°›ìŠµë‹ˆë‹¤.<br>
                ë¬´ë‹¨ ë³µì œ, ë°°í¬, ì „ì†¡, ì „ì‹œ, ê³µì—°, ë°©ì†¡ ë˜ëŠ” ê¸°íƒ€ ë°©ë²•ìœ¼ë¡œ<br>
                ì €ì‘ê¶Œìì˜ ë™ì˜ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
            </div>
        </div>
        
        <div class="footer-section">
            <div class="footer-title">ğŸ‘¨â€ğŸ’» ê°œë°œì ì •ë³´</div>
            <div>
                Developed by HJ Yoo<br>
                Email: asitis7@hotmail.com
            </div>
        </div>
        
        <div class="footer-section">
            <div class="footer-title">âš ï¸ ì¤‘ìš” ì•ˆë‚´</div>
            <div>
                ë³¸ ê²Œì„ì€ íŒŒì¼ëŸ¿ í”„ë¡œê·¸ë¨ìœ¼ë¡œ<br>
                ì–¸ì œë“  ë³€ê²½ ë° ì‚­ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            currentGameIndex: 0,
            totalGames: 4,
            gameWindow: null,
            games: [
                {
                    url: 'https://asitis7.github.io/Senior_Game/Senior_01_01.html',
                    title: 'ê²Œì„ 1 - ê¸°ì´ˆ ë‘ë‡Œ í›ˆë ¨',
                    description: 'ë‘ë‡Œ í™œë™ì˜ ê¸°ì´ˆë¥¼ ë‹¤ì§€ëŠ” ì²« ë²ˆì§¸ í›ˆë ¨ì…ë‹ˆë‹¤.'
                },
                {
                    url: 'https://asitis7.github.io/Senior_Game/Senior_01_02.html',
                    title: 'ê²Œì„ 2 - ì§‘ì¤‘ë ¥ í–¥ìƒ',
                    description: 'ì§‘ì¤‘ë ¥ê³¼ ì£¼ì˜ë ¥ì„ í‚¤ìš°ëŠ” ë‘ ë²ˆì§¸ í›ˆë ¨ì…ë‹ˆë‹¤.'
                },
                {
                    url: 'https://asitis7.github.io/Senior_Game/Senior_01_03.html',
                    title: 'ê²Œì„ 3 - ê¸°ì–µë ¥ ê°•í™”',
                    description: 'ê¸°ì–µë ¥ê³¼ ì¸ì§€ ëŠ¥ë ¥ì„ ê°•í™”í•˜ëŠ” ì„¸ ë²ˆì§¸ í›ˆë ¨ì…ë‹ˆë‹¤.'
                },
                {
                    url: 'https://asitis7.github.io/Senior_Game/Senior_01_04.html',
                    title: 'ê²Œì„ 4 - ì¢…í•© í›ˆë ¨',
                    description: 'ëª¨ë“  ëŠ¥ë ¥ì„ ì¢…í•©ì ìœ¼ë¡œ í›ˆë ¨í•˜ëŠ” ë§ˆì§€ë§‰ ë‹¨ê³„ì…ë‹ˆë‹¤.'
                }
            ]
        };
    </script>
</body>
</html>

        // PWA ì„¤ì¹˜ ê´€ë ¨ ë³€ìˆ˜
        let deferredPrompt;
        let isInstalled = false;
        
        // ê¸°ê¸° ì •ë³´ ê°ì§€
        const userAgent = navigator.userAgent.toLowerCase();
        const isIOS = /iphone|ipad|ipod/.test(userAgent);
        const isAndroid = /android/.test(userAgent);
        const isSafari = /safari/.test(userAgent) && !/chrome/.test(userAgent);
        const isChrome = /chrome/.test(userAgent);
        const isMobile = isIOS || isAndroid;

        function updateGameInfo() {
            const current = gameState.games[gameState.currentGameIndex];
            
            document.getElementById('currentGameTitle').textContent = current.title;
            document.getElementById('gameDescription').innerHTML = current.description + 
                '<br>ê²Œì„ ì™„ë£Œ í›„ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ì„¸ìš”.';
            
            const progress = ((gameState.currentGameIndex + 1) / gameState.totalGames) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            if (gameState.currentGameIndex < gameState.totalGames) {
                document.getElementById('progressText').textContent = 
                    `ê²Œì„ ${gameState.currentGameIndex + 1}/${gameState.totalGames} ì§„í–‰ì¤‘`;
            }
        }

        function launchCurrentGame() {
            const current = gameState.games[gameState.currentGameIndex];
            const launchBtn = document.getElementById('launchBtn');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'game_start', {
                    'game_name': current.title,
                    'game_index': gameState.currentGameIndex + 1,
                    'game_url': current.url
                });
            }
            
            gameState.gameWindow = window.open(
                current.url, 
                `game_${gameState.currentGameIndex}`, 
                'width=800,height=600,scrollbars=yes,resizable=yes'
            );
            
            if (!gameState.gameWindow || gameState.gameWindow.closed || typeof gameState.gameWindow.closed == 'undefined') {
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'popup_blocked', {
                        'game_name': current.title,
                        'game_index': gameState.currentGameIndex + 1
                    });
                }
                alert(`íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤!\n\në¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ íŒì—…ì„ í—ˆìš©í•˜ê±°ë‚˜,\nì•„ë˜ ì£¼ì†Œë¥¼ ìƒˆ íƒ­ì—ì„œ ì§ì ‘ ì—´ì–´ì£¼ì„¸ìš”:\n\n${current.url}`);
                return;
            }
            
            launchBtn.textContent = 'âœ… ê²Œì„ ì™„ë£Œ';
            launchBtn.onclick = markGameCompleted;
            launchBtn.classList.add('completed');
            
            document.getElementById('statusText').innerHTML = 
                'ğŸ® ê²Œì„ì´ ìƒˆ ì°½ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.<br>' +
                'ê²Œì„ì„ ì™„ë£Œí•œ í›„ ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•´ì£¼ì„¸ìš”.';
            
            gameState.gameWindow.focus();
        }

        function markGameCompleted() {
            const launchBtn = document.getElementById('launchBtn');
            const current = gameState.games[gameState.currentGameIndex];
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'game_completed', {
                    'game_name': current.title,
                    'game_index': gameState.currentGameIndex + 1
                });
            }
            
            if (gameState.gameWindow && !gameState.gameWindow.closed) {
                gameState.gameWindow.close();
            }
            
            launchBtn.textContent = 'ğŸ‰ ì™„ë£Œ!';
            launchBtn.style.background = 'linear-gradient(135deg, #4CAF50, #66BB6A)';
            launchBtn.onclick = null;
            
            setTimeout(() => {
                proceedToNextGame();
            }, 1500);
        }

        function proceedToNextGame() {
            gameState.currentGameIndex++;
            
            if (gameState.currentGameIndex >= gameState.totalGames) {
                showCompletionScreen();
                return;
            }
            
            showAutoProgressIndicator();
        }

        function showAutoProgressIndicator() {
            const indicator = document.getElementById('autoProgressIndicator');
            const countdown = document.getElementById('countdown');
            
            indicator.classList.remove('hidden');
            
            let seconds = 3;
            countdown.textContent = `${seconds}ì´ˆ í›„ ì§„í–‰`;
            
            const countdownInterval = setInterval(() => {
                seconds--;
                countdown.textContent = `${seconds}ì´ˆ í›„ ì§„í–‰`;
                
                if (seconds <= 0) {
                    clearInterval(countdownInterval);
                    indicator.classList.add('hidden');
                    loadNextGame();
                }
            }, 1000);
        }

        function loadNextGame() {
            const launchBtn = document.getElementById('launchBtn');
            launchBtn.textContent = 'ğŸ® ê²Œì„ ì‹œì‘í•˜ê¸°';
            launchBtn.onclick = launchCurrentGame;
            launchBtn.classList.remove('completed');
            launchBtn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            
            updateGameInfo();
            
            document.getElementById('statusText').innerHTML = 
                'ê²Œì„ì„ ì‹œì‘í•˜ë©´ ìƒˆ ì°½ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.<br>' +
                'ê²Œì„ ì™„ë£Œ í›„ ì´ ì°½ìœ¼ë¡œ ëŒì•„ì™€ì„œ "ê²Œì„ ì™„ë£Œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.';
        }

        function showCompletionScreen() {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'all_games_completed', {
                    'total_games': gameState.totalGames,
                    'completion_time': new Date().toISOString()
                });
            }
            
            document.getElementById('gameContainer').classList.add('hidden');
            document.getElementById('completionSection').classList.remove('hidden');
            
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = 'ëª¨ë“  ê²Œì„ ì™„ë£Œ! ğŸ‰';
        }

        function restartAllGames() {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'restart_all_games', {
                    'restart_time': new Date().toISOString()
                });
            }
            
            gameState.currentGameIndex = 0;
            
            document.getElementById('completionSection').classList.add('hidden');
            document.getElementById('gameContainer').classList.remove('hidden');
            
            updateGameInfo();
            
            const launchBtn = document.getElementById('launchBtn');
            launchBtn.textContent = 'ğŸ® ê²Œì„ ì‹œì‘í•˜ê¸°';
            launchBtn.onclick = launchCurrentGame;
            launchBtn.classList.remove('completed');
            launchBtn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            
            document.getElementById('statusText').innerHTML = 
                'ê²Œì„ì„ ì‹œì‘í•˜ë©´ ìƒˆ ì°½ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.<br>' +
                'ê²Œì„ ì™„ë£Œ í›„ ì´ ì°½ìœ¼ë¡œ ëŒì•„ì™€ì„œ "ê²Œì„ ì™„ë£Œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.';
        }

        // PWA ì„¤ì¹˜ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function checkPWAInstallation() {
            // ì´ë¯¸ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (window.matchMedia && window.matchMedia('(display-mode: standalone)').matches) {
                isInstalled = true;
                return;
            }
            
            // ì´ë¯¸ ì„¤ì¹˜ ì¹´ë“œë¥¼ ë¬´ì‹œí–ˆëŠ”ì§€ í™•ì¸
            if (localStorage.getItem('installCardDismissed') === 'true') {
                return;
            }
            
            // ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œë§Œ ì„¤ì¹˜ ì¹´ë“œ í‘œì‹œ
            if (isMobile && !isInstalled) {
                setTimeout(() => {
                    document.getElementById('installCard').classList.add('show');
                }, 1000); // 1ì´ˆ í›„ì— í‘œì‹œ
            }
        }

        function dismissInstallCard() {
            document.getElementById('installCard').classList.remove('show');
            localStorage.setItem('installCardDismissed', 'true');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'install_card_dismissed', {
                    'device_type': isIOS ? 'iOS' : (isAndroid ? 'Android' : 'Desktop')
                });
            }
        }

        function showInstallModal() {
            const modal = document.getElementById('installModal');
            const instructionsDiv = document.getElementById('deviceInstructions');
            const autoInstallBtn = document.getElementById('autoInstallBtn');
            
            // ê¸°ê¸°ë³„ ì„¤ì¹˜ ë°©ë²• ìƒì„±
            let instructionsHTML = '';
            
            if (isIOS) {
                instructionsHTML = `
                    <div class="manual-instructions">
                        <h4>ğŸ“± iPhone/iPad ì„¤ì¹˜ ë°©ë²•</h4>
                        <ol>
                            <li>Safari ë¸Œë¼ìš°ì €ë¡œ ì•„ë˜ì˜ í˜ì´ì§€ë¥¼ ì—¬ì„¸ìš”
                                <div class="game-url">https://asitis7.github.io/Senior_Game/For_Senior_Main_Menu.html</div>
                            </li>
                            <li>í™”ë©´ ì•„ë˜ìª½ <strong>ê³µìœ  ë²„íŠ¼ (â¬†ï¸)</strong>ì„ í„°ì¹˜í•˜ì„¸ìš”</li>
                            <li><strong>"í™ˆ í™”ë©´ì— ì¶”ê°€"</strong>ë¥¼ ì°¾ì•„ì„œ í„°ì¹˜í•˜ì„¸ìš”</li>
                            <li><strong>"ì¶”ê°€"</strong> ë²„íŠ¼ì„ í„°ì¹˜í•˜ë©´ ì„¤ì¹˜ ì™„ë£Œ!</li>
                        </ol>
                    </div>
                `;
            } else if (isAndroid) {
                if (isChrome) {
                    // Chromeì—ì„œëŠ” ìë™ ì„¤ì¹˜ ê°€ëŠ¥
                    autoInstallBtn.style.display = 'block';
                }
                instructionsHTML = `
                    <div class="manual-instructions">
                        <h4>ğŸ“± Android ì„¤ì¹˜ ë°©ë²•</h4>
                        <ol>
                            <li>Chrome ë¸Œë¼ìš°ì €ë¡œ ì´ í˜ì´ì§€ë¥¼ ì—¬ì„¸ìš”</li>
                            <li>í™”ë©´ ìš°ìƒë‹¨ <strong>ë©”ë‰´ ë²„íŠ¼ (â‹®)</strong>ì„ í„°ì¹˜í•˜ì„¸ìš”</li>
                            <li><strong>"í™ˆ í™”ë©´ì— ì¶”ê°€"</strong> ë˜ëŠ” <strong>"ì•± ì„¤ì¹˜"</strong>ë¥¼ í„°ì¹˜í•˜ì„¸ìš”</li>
                            <li><strong>"ì¶”ê°€"</strong> ë˜ëŠ” <strong>"ì„¤ì¹˜"</strong> ë²„íŠ¼ì„ í„°ì¹˜í•˜ë©´ ì™„ë£Œ!</li>
                        </ol>
                    </div>
                `;
            } else {
                instructionsHTML = `
                    <div class="manual-instructions">
                        <h4>ğŸ’» ì»´í“¨í„°ì—ì„œ ì„¤ì¹˜</h4>
                        <p style="text-align: center; color: #666; font-size: 16px; padding: 20px;">
                            ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ì ‘ì†í•˜ì‹œë©´<br>
                            í™ˆ í™”ë©´ì— ì•±ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </p>
                    </div>
                `;
            }
            
            instructionsDiv.innerHTML = instructionsHTML;
            modal.classList.add('show');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'install_modal_shown', {
                    'device_type': isIOS ? 'iOS' : (isAndroid ? 'Android' : 'Desktop'),
                    'user_agent': navigator.userAgent
                });
            }
        }

        function closeInstallModal() {
            document.getElementById('installModal').classList.remove('show');
        }

        async function attemptAutoInstall() {
            if (deferredPrompt) {
                try {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'pwa_install_prompt_result', {
                            'outcome': outcome,
                            'device_type': 'Android'
                        });
                    }
                    
                    if (outcome === 'accepted') {
                        closeInstallModal();
                        dismissInstallCard();
                        alert('ğŸ‰ ì•±ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!\ní™ˆ í™”ë©´ì—ì„œ "ì¹˜ë§¤ ì˜ˆë°© 365" ì•„ì´ì½˜ì„ ì°¾ì•„ë³´ì„¸ìš”.');
                    }
                    
                    deferredPrompt = null;
                } catch (error) {
                    console.error('ì„¤ì¹˜ ì˜¤ë¥˜:', error);
                    alert('ìë™ ì„¤ì¹˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìœ„ì˜ ìˆ˜ë™ ì„¤ì¹˜ ë°©ë²•ì„ ë”°ë¼í•´ì£¼ì„¸ìš”.');
                }
            } else {
                alert('ìë™ ì„¤ì¹˜ê°€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìœ„ì˜ ìˆ˜ë™ ì„¤ì¹˜ ë°©ë²•ì„ ë”°ë¼í•´ì£¼ì„¸ìš”.');
            }
        }

        // PWA ê´€ë ¨ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            if (isAndroid && isChrome) {
                console.log('PWA ìë™ ì„¤ì¹˜ ê°€ëŠ¥');
            }
        });

        window.addEventListener('appinstalled', (evt) => {
            isInstalled = true;
            dismissInstallCard();
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'pwa_installed', {
                    'device_type': isIOS ? 'iOS' : (isAndroid ? 'Android' : 'Desktop')
                });
            }
            
            // ì„¤ì¹˜ ì™„ë£Œ ì•Œë¦¼
            setTimeout(() => {
                alert('ğŸ‰ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\ní™ˆ í™”ë©´ì—ì„œ "ì¹˜ë§¤ ì˜ˆë°© 365" ì•„ì´ì½˜ìœ¼ë¡œ ì‰½ê²Œ ì ‘ì†í•˜ì„¸ìš”.');
            }, 1000);
        });

        // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
        async function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                try {
                    const swCode = `
                        const CACHE_NAME = 'dementia-prevention-365-v1';
                        const urlsToCache = [
                            '/',
                            'https://asitis7.github.io/Senior_Game/For_Senior_Main_Menu.html',
                            'https://asitis7.github.io/Senior_Game/Senior_01_01.html',
                            'https://asitis7.github.io/Senior_Game/Senior_01_02.html',
                            'https://asitis7.github.io/Senior_Game/Senior_01_03.html',
                            'https://asitis7.github.io/Senior_Game/Senior_01_04.html'
                        ];
                        
                        self.addEventListener('install', (event) => {
                            event.waitUntil(
                                caches.open(CACHE_NAME)
                                    .then((cache) => cache.addAll(urlsToCache))
                            );
                        });
                        
                        self.addEventListener('fetch', (event) => {
                            event.respondWith(
                                caches.match(event.request)
                                    .then((response) => {
                                        return response || fetch(event.request);
                                    })
                            );
                        });
                    `;
                    
                    const blob = new Blob([swCode], { type: 'application/javascript' });
                    const swUrl = URL.createObjectURL(blob);
                    
                    const registration = await navigator.serviceWorker.register(swUrl);
                    console.log('ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì„±ê³µ:', registration);
                } catch (error) {
                    console.log('ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì‹¤íŒ¨:', error);
                }
            }
        }

        // ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ ë™ì  ìƒì„±
        function createManifest() {
            const manifestData = {
                "name": "ì¹˜ë§¤ ì˜ˆë°© 365",
                "short_name": "ì¹˜ë§¤ì˜ˆë°©365",
                "description": "ì¹˜ë§¤ ì˜ˆë°©ì„ ìœ„í•œ 365ì¼ ë‘ë‡Œ í›ˆë ¨",
                "start_url": "https://asitis7.github.io/Senior_Game/For_Senior_Main_Menu.html",
                "display": "standalone",
                "background_color": "#20B2AA",
                "theme_color": "#20B2AA",
                "orientation": "portrait",
                "icons": [
                    {
                        "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJiZyIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzIwQjJBQTtzdG9wLW9wYWNpdHk6MSIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM0MEUwRDA7c3RvcC1vcGFjaXR5OjEiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxOTIiIHJ4PSIzMiIgZmlsbD0idXJsKCNiZykiLz48dGV4dCB4PSI5NiIgeT0iNjQiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzNiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7suYDrp6A8L3RleHQ+PHRleHQgeD0iOTYiIHk9IjEwNCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjM2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuyYiOuwqfCfkao8L3RleHQ+PHRleHQgeD0iOTYiIHk9IjE0NCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjU2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI0ZGNjk0NyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+MzY1PC90ZXh0Pjwvc3ZnPg==",
                        "sizes": "192x192",
                        "type": "image/svg+xml",
                        "purpose": "any maskable"
                    },
                    {
                        "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJiZyIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzIwQjJBQTtzdG9wLW9wYWNpdHk6MSIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM0MEUwRDA7c3RvcC1vcGFjaXR5OjEiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIHJ4PSI4MCIgZmlsbD0idXJsKCNiZykiLz48dGV4dCB4PSIyNTYiIHk9IjE3MiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9Ijk2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuyvhOyWrA==</L3RleHQ+PHRleHQgeD0iMjU2IiB5PSIyNzYiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSI5NiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7smIjrsKnwnZGqPC90ZXh0Pjx0ZXh0IHg9IjI1NiIgeT0iMzgwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQ0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI0ZGNjk0NyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+MzY1PC90ZXh0Pjwvc3ZnPg==",
                        "sizes": "512x512",
                        "type": "image/svg+xml",
                        "purpose": "any maskable"
                    }
                ]
            };
            
            const manifestBlob = new Blob([JSON.stringify(manifestData)], { type: 'application/json' });
            const manifestUrl = URL.createObjectURL(manifestBlob);
            
            const manifestLink = document.createElement('link');
            manifestLink.rel = 'manifest';
            manifestLink.href = manifestUrl;
            document.head.appendChild(manifestLink);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            updateGameInfo();
            checkPWAInstallation();
            registerServiceWorker();
            createManifest();
        };

        // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì—´ë¦° ê²Œì„ ì°½ ë‹«ê¸°
        window.onbeforeunload = function() {
            if (gameState.gameWindow && !gameState.gameWindow.closed) {
                gameState.gameWindow.close();
            }
        };
